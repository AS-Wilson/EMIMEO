\documentclass[colorlinks,11pt,a4paper,normalphoto,withhyper,ragged2e]{altareport}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%% DEFAULT PACKAGES & SETTINGS %%%%%%%%%%
\usepackage[utf8]{inputenc}
\usepackage{setspace} %1.5 line spacing
\usepackage{notoccite} %% Citation numbering
\usepackage{lscape} %% Landscape table
\usepackage{caption} %% Adds a newline in the table caption

%% The paracol package lets you typeset columns of text in parallel
\usepackage{paracol}
\usepackage[none]{hyphenat}

%% Document and Theme Fonts
\usepackage[T1]{fontenc}
\usepackage{paratype}
\usepackage[defaultsans]{lato}
%\usepackage[sfdefault,light,condensed]{roboto}
%\usepackage[rm]{roboto}
%\usepackage[defaultsans]{lato}
%\usepackage{sourcesanspro}
%\usepackage[rm]{merriweather}

\setlength{\intextsep}{4pt} % Set defualt spacing around floats

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%% THEMES %%%%%%%%%%

%% Standard theme options are below, leave blank for B&W / no colours (BoringDefault). Note the theme will be set to default if you enter a non-exsistant theme name.
\SetTheme{UNILIM}
%% UNILIM
%% PastelBlue
%% GreenAndGold
%% Purple
%% PastelRed
%% BoringDefault (Leave blank / enter anything not found above)

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%






%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%% DOCUMENT SPECIFIC PACKAGES %%%%%%%%%%

\usepackage{amssymb}
\usepackage{amsfonts}
\usepackage{mathtools}

\usepackage{pythontex} % Run python code in this latex doc

%%%%%%%%% Karnaugh Map Package & Settings %%%%%%%%%
\usepackage[export]{adjustbox}

\usetikzlibrary{matrix,calc}
\usepackage{karnaugh-map}

\colorlet{LightRed}{red!60!}
\colorlet{LightBlue}{blue!60!}
\colorlet{LightYellow}{yellow!60!}
\colorlet{LightGreen}{green!60!}
\colorlet{LightOrange}{orange!60!}

%%%%%%%%% MATLAB Language Settings %%%%%%%%%
\usepackage[numbered,framed]{matlab-prettifier} % To add code listings from matlab
\lstMakeShortInline[style=Matlab-editor]" %% This makes " an escape character to write in matlab editor font

%%%%%%%%% Arduino Language Settings %%%%%%%%%
\lstset{%
  language = Octave,
  backgroundcolor=\color{white},   
  basicstyle=\color{body}\footnotesize\ttfamily,       
  %breakatwhitespace=false,         
  breaklines=true,                                
  commentstyle=\color{CommentGreen},
  columns=fullflexible,
  escapeinside={\%*}{*)},
  extendedchars=true,
  frame=leftline,
  keepspaces=true,
  keywordstyle=\color{LightBlue},
  numbersep=5pt,
  numberstyle=\footnotesize\color{gray},
  rulecolor=\color{black},
  rulesepcolor=\color{black},
  showtabs=true,
  stringstyle=\color{LightBlue},
  tabsize=2,                       
  title=\lstname,
  emphstyle=\bfseries\color{LightOrange}%  style for emph={} 
} 

%%%%% language/example specific settings: %%%%%
\lstdefinestyle{Arduino}{%
    language = C++,
    keywords={void, int, boolean, char, unsigned, long, uint32_t, volatile, byte, uint8_t, HIGH, OUTPUT, LOW, INPUT},%                 define keywords
    morecomment=[l]{//},%             treat // as comments
    morecomment=[s]{/*}{*/},%         define /* ... */ comments
    emph={WiFi, Serial, IPAddress, Adafruit_NeoPixel, setFrequency, println, print, delay, digitalWrite, pinMode, available, digitalPinToInterrupt, attachInterrupt, detachInterrupt, analogRead, NEO_GRB, NEO_KHZ800, noInterrupts, interrupts, strstr, endPacket, beginPacket, remoteIP, remotePort, APClientMacAddress, Color}%        keywords to emphasize
}


%%%%% Settings for python pgf graphs %%%%%
\usepackage{pgfplots}
\usetikzlibrary{arrows.meta}

\pgfplotsset{compat=newest,
    width=6cm,
    height=3cm,
    scale only axis=true,
    max space between ticks=25pt,
    try min ticks=5,
    every axis/.style={
        axis y line=left,
        axis x line=bottom,
        axis line style={thick,->,>=latex, shorten >=-.4cm}
    },
    every axis plot/.append style={thick},
    tick style={black, thick}
}
\tikzset{
    semithick/.style={line width=0.8pt},
}

\usepgfplotslibrary{groupplots}
\usepgfplotslibrary{dateplot}


% Reduce space around captions
% \captionsetup{aboveskip=5pt, belowskip=5pt}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%




%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%% USEFUL SETTINGS %%%%%%%%%%
%% Change some font sizes, this will override the defaults
\renewcommand{\ReportTitleFont}{\Huge\rmfamily\bfseries} %% Title Page - Main Title
\renewcommand{\ReportSubTitleFont}{\huge\bfseries} %% Title Page - Sub-Title
\renewcommand{\ReportSectionFont}{\LARGE\rmfamily\bfseries} %% Section Title
\renewcommand{\ReportSubSectionFont}{\large\bfseries} %% SubSection Title
\renewcommand{\FootNoteFont}{\footnotesize} %% Footnotes and Header/Footer

%% Change the bullets for itemize and rating marker
\renewcommand{\itemmarker}{{\small\textbullet}}
\renewcommand{\ratingmarker}{\faCircle}

%% Change the page layout
\geometry{left=1.5cm,right=1.5cm,top=3cm,bottom=3cm,columnsep=8mm}
\onehalfspace   % 1.5 line spacing

\definecolor{CommentGreen}{HTML}{228B22}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%




%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\include{references.bib}

%%%%%%%%%% TITLE PAGE INFO %%%%%%%%%%
\ReportTitle{Fundamentals of Coherent Photonics}
\SubTitle{Linear Propagation in Optical Wave-guides - Notes \& Tutorials}
\Author{Andrew Simon Wilson}
\ReportDate{\today}
\FacultyOrLocation{EMIMEO Programme}
\ModCoord{Dr. Diominique Pagnoux}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\begin{document}

\MakeReportTitlePage


%%%%% CONTENTS %%%%%
\pagenumbering{roman} % Start roman numbering
\setcounter{page}{1}


%%%%%%%%%% YOUR NAME, PROFESSION, PORTRAIT, CONTACT INFO, SOCIAL MEDIA ETC. %%%%%%%%%%
\name{Andrew Simon Wilson, BEng}
\tagline{Post-graduate Master's Student, Erasmus Mundus JMD - EMIMEO Programme}

\personalinfo{
  \email{andrew.wilson@etu.unilim.fr}
  \linkedin{andrew-simon-wilson} 
  \github{AS-Wilson}
  \phone{+44 7930 560 383}
}

%% You can add multiple photos on the left or right
% \photoR{3cm}{Images/a-wilson-potrait.jpg}
% \photoL{3cm}{Yacht_High,Suitcase_High}


\section*{Author Details}
\makeauthordetails

%% Table of contents print level -1: part, 0: chapter, 1: section, 2:sub-section, 3:sub-sub-section, etc.
\setcounter{tocdepth}{2} 
\tableofcontents %% Prints a list of all sections based on the above command
%\listoffigures %% Prints a list of all figures in the report
%\listoftables %% Prints a list of all tables in the report




%%%%%%%%%% DOCUMENT CONTENT BEGINS HERE %%%%%%%%%%

%%%%% INTRO %%%%%
\section*{Introduction}
What is the rational behind this document, why would I make it? \linebreak
Put simply, I like to have a permanent and archive-able copy of my work and for it to be in a presentable format. This results in easy revision, ensures I have fully explored the topic and questions, and provides an easy to read way for professors to check my understanding and to give others help with the topic. \linebreak 
I spent have spent a lot of time developing the template used to make this {\LaTeX} document, I want others to benefit from this work so the source code for this template is available on GitHub \cite{JenningsWilson2021}.
\newpage
\pagenumbering{arabic} % Start document numbering - roman numbering




\section{Class Notes, Study Notes, and Revision}







\paragraph{The propagation constant, $\boldsymbol{\beta}$ \linebreak}
Firstly, please note this is sometimes (extremely confusingly) referred to as the wavenumber in some textbooks (and vice-versa, the wavenumber is called the propagation constant). However, in the case of these notes this will always be the propagation constant (with the wavenumber being something else entirely, described in these notes elsewhere, and denoted $k$). measured in $m^{-1}$

Denoted $\beta$ 

each mode will result in a different solution to it's propagation constant (sometimes called a wavenumber in textbooks), 

\columnratio{0.2}
%%%%%%%%%% LEFT HAND COLUMN %%%%%%%%%%
% Start a 2-column paracol. Both the left and right columns will automatically
% break across pages if things get too long.
\begin{paracol}{2}

\medskip

\setlength{\jot}{2ex}
\begin{align}
	\beta &= \nonumber
\end{align}

%%%%%%%%%% RIGHT HAND COLUMN %%%%%%%%%%
%% Switch to the right column. This will now automatically move to the second
%% page if the content is too long.
\switchcolumn

\setlength{\jot}{1ex}
\begin{align}
	\text{Where:}& \nonumber\\
	\beta & \text{ is something} \nonumber
\end{align}

\end{paracol}




\paragraph{The wavenumber, $\textbf{k}$ \linebreak}



\columnratio{0.2}
%%%%%%%%%% LEFT HAND COLUMN %%%%%%%%%%
% Start a 2-column paracol. Both the left and right columns will automatically
% break across pages if things get too long.
\begin{paracol}{2}

\medskip

\setlength{\jot}{2ex}
\begin{align}
	k &= \frac{\omega}{c} = \frac{2\pi\nu}{c} \nonumber\\
	&= \frac{2\pi}{\lambda} = nk_0 \nonumber
\end{align}

%%%%%%%%%% RIGHT HAND COLUMN %%%%%%%%%%
%% Switch to the right column. This will now automatically move to the second
%% page if the content is too long.
\switchcolumn

\setlength{\jot}{1ex}
\begin{align}
	\text{Where:}& \nonumber\\
	\omega & \text{ (greek letter ``omega'') is the angular, optical frequency in Radians/Second} \nonumber\\
	\nu & \text{ (greek letter ``nu'') is the periodic frequency in Hertz} \nonumber\\
	c & \text{ is the speed } \nonumber\\
	\lambda & \text{ (greek letter ``lambda'') is the wavelength of the light in metres} \nonumber	
\end{align}

\end{paracol}




\paragraph{The ``V'' Parameter, ``Fibre'' Parameter or Normalised Spatial Frequency, $\textbf{V}$ \linebreak}

 and governs the number of modes able 

\columnratio{0.2}
%%%%%%%%%% LEFT HAND COLUMN %%%%%%%%%%
% Start a 2-column paracol. Both the left and right columns will automatically
% break across pages if things get too long.
\begin{paracol}{2}

\medskip

\setlength{\jot}{2ex}
\begin{align}
	V = \frac{2 \pi a}{\lambda}\sqrt{n_{core}^2 - n_{clad}^2} \nonumber
\end{align}

%%%%%%%%%% RIGHT HAND COLUMN %%%%%%%%%%
%% Switch to the right column. This will now automatically move to the second
%% page if the content is too long.
\switchcolumn

\setlength{\jot}{1ex}
\begin{align}
	\text{Where:}& \nonumber\\\
	\lambda & \text{ is the wavelength of the light propagating down the fibre} \nonumber\\\
	n_{core} & \text{ is the refractive index of the core's material (unitless)} \nonumber\\\
	n_{clad} & \text{ is the refractive index of the cladding's material (unitless)} \nonumber\\\
	V & \text{ is the normalised spatial frequency, the fibre parameter, or the ``V'' parameter} \nonumber\
\end{align}

\end{paracol}



\begin{align}
	\text{Where:}& \nonumber\\\
	\bar{\Theta}_c & \text{ is the critical angle for rays to make total internal reflections at the core-cladding boundary (Radians)} \nonumber\
\end{align}




\newpage




\section{Tutorials}
%%%%% TUTORIAL ONE %%%%%
\subsection{Tutorial One}
%%%%% QUESTION ONE %%%%%
\subsubsection{Question One}
\textit{Step index fibres are constituted by a cylindrical core refractive index n\textsubscript{1}($\lambda$), surrounded by a cladding refractive index n\textsubscript{2}($\lambda$). Most of the time, the cladding is masde of pure silica and the core is made of silica doped with germanium.} \\


\paragraph{Part A \linebreak}
\textit{What is the meaning of the expression ``Step Index''?} \linebreak


%% Set the left/right column width ratio to 6:4.
\columnratio{0.6}

%%%%%%%%%% LEFT HAND COLUMN %%%%%%%%%%
% Start a 2-column paracol. Both the left and right columns will automatically
% break across pages if things get too long.
\begin{paracol}{2}

``Step Index'' refers to the refractive index profile of the core and the difference between the core and cladding refractive indices (usually denoted $n_1$ and $n_2$ respectively). In a step index fibre the index of the core remains constant through it's radius and then the refractive index value ``steps'' immediately at the cladding.

Figure \ref{fig:fibre_index_profile} shows the cross section of a step index fibre (on the left of the image) and a graph plotting refractive index versus cross-sectional radius, the x-axis represents the refractive index as it varies against the radius of the cross section (represented by the y-axis).


%%%%%%%%%% RIGHT HAND COLUMN %%%%%%%%%%
%% Switch to the right column. This will now automatically move to the second
%% page if the content is too long.
\switchcolumn

\begin{figure}[h]
	\centering
	\scalebox{0.4}{\input{./Graphs/cs-&-refrac-ind.pgf}}
	
    \caption{\centering{An image demonstrating the meaning of a ``step index'' fibre: on the left is the cross-section of the fibre, and the right shows the refractive index vs radius}}

    \label{fig:fibre_index_profile}
\end{figure}

\end{paracol}




\paragraph{Part B \linebreak}
\textit{What is the role of germanium in the core?} \linebreak

Germanium is one of a myriad of available materials that are used to change the refractive index of silica to desirable values. Making the silica in the core of an optical fibre slightly impure results in an increase of the core's refractive index which results in light being able to propagate through the core due to the difference between the core and cladding refractive indices.




\paragraph{Part C \linebreak}
\textit{In what range of wavelengths are optical fibres used for telecommunication systems? Why?} \linebreak

\emph{Simple / Short Answer:} \linebreak
The range of wavelengths used in optical communications is between 850nm - 1675nm. The reason for this particular range is due to the suitably low attenuation and dispersion characteristics at these wavelengths in silica fibre. \linebreak

\emph{Detailed / Long Answer:} \linebreak
For a number of reason, there are a lot of nuances in the answer to this question. The first optical fibres operated in a band with a centre wavelength around 850-870nm \cite{fund_of_photonics}\cite{adv_fiber_optics} where efficient enough light sources and detectors were available, and only for short distance as the loss was ~4 dB/km. \cite{adv_fiber_optics} \linebreak

\newpage

However, since the development of these original telecommunications systems optical fibre technologies have advanced significantly and there is a range of frequencies which are considered to be within the practical application window for modern optical fibres. Sources differ and as such listed below are the frequencies reported to be used (and which sources report them):

\smallskip

\begin{itemize}[leftmargin=1cm]
	\item 1265nm - 1675nm (EMIMEO course notes: Linear Propagation in Optical Fibres, Chapter One)
	\item 1260nm - 1675nm \cite{fund_of_photonics}
	\item 1250nm - 1650nm: Additionally specified that most modern telecommunications are only conducted on the C-Band (1530-1565nm), L-Band (1565-1625nm), with the use of Raman amplification this is extended to the E\&S bands (1360-1463nm, 1460-1530nm), and originally the O-Band was used (1260-1360nm) \cite{adv_fiber_optics}
\end{itemize}


Regardless of which exact values are stated in the various sources (they are all roughly the same), specifying a range of realistic wavelengths for the propagation of light down an optical fibre is necessary for a number of reasons, these being: \linebreak

The attenuation (a coefficient given the symbol $\alpha$ and measured in dB/Km) is at it's lowest across this range of values, allowing propagation of light without over-degradation of signal. Across the range of frequencies the attenuation is in the range of 0.3 - ~1 dB/Km with a significant dip at ~1550nm). And; \linebreak

The dispersion characteristics ($D_{\lambda}$, ps/Km-nm), which is the the mount of spread (change in period) of a pulse as it propagates down a fibre, are most desirable in this range. 
Dispersion is considered to be chromatic dispersion (dispersion of light differs with wavelength) which is made of two components material dispersion and waveguide dispersion (with the latter held as being larger than the former \cite{fund_of_photonics}). The equations used to calculate dispersion is shown in Equations \ref{eqn:dispersion} \& \ref{eqn:dispersion_mat_wg}:


%% Set the left/right column width ratio to 6:4.
\columnratio{0.35}

%%%%%%%%%% LEFT HAND COLUMN %%%%%%%%%%
% Start a 2-column paracol. Both the left and right columns will automatically
% break across pages if things get too long.
\begin{paracol}{2}

\medskip

\setlength{\jot}{4ex}
\begin{gather}
	\sigma_{\tau} = \lvert D \rvert \cdot \sigma_{\lambda} \cdot L
	\label{eqn:dispersion}\\
	D = D_{\lambda} + D_{w}
	\label{eqn:dispersion_mat_wg}
\end{gather}

%%%%%%%%%% RIGHT HAND COLUMN %%%%%%%%%%
%% Switch to the right column. This will now automatically move to the second
%% page if the content is too long.
\switchcolumn

\setlength{\jot}{1ex}
\begin{align}
	\text{Where:}& \nonumber\\\
	\sigma_{\tau} & \text{ is the spectral change of pulse width} \nonumber\\\
	\sigma_{\lambda} & \text{ is the spectrum of the original pulse} \nonumber\\\
	L & \text{ is the length of the fiber (Km)} \nonumber\\\
	D & \text{ is the total dispersion coefficient (ps/Km-nm)} \nonumber\\\
	D_{\lambda} & \text{ is the material dispersion (ps/Km-nm), and;} \nonumber\\\
	D_{w} & \text{ is the waveguide dispersion (ps/Km-nm)} \nonumber\
\end{align}


\end{paracol}


\newpage




\subsubsection{Question Two}
\textit{A manufacturer of silica fibres receives an order for a step index fibre which must fulfil the three following conditions:}

\begin{enumerate}[leftmargin=1cm, label={\textit{\bfseries C\arabic*:}}]
	\item \textit{The numerical aperture, which is assumed to be independent of the wavelength, must be 0.12 (i.e. $NA=0.12$)}
	\item \textit{The fibre must be single mode @ $\lambda = 800 nm$}
	\item \textit{The fibre must be able to guide at least two LP modes @  $\lambda = 750 nm$}
\end{enumerate}

\medskip

\textit{This manufacturer has 5 different fibres described in the Table \ref{tab:manufacturers_fibre}: }

\smallskip

\begin{table}[h!]
    \centering
    \def\arraystretch{1.5}%  1 is the default, change whatever you need
    \begin{tabular}{|p{3.5cm}|p{2cm}|p{2cm}|p{2cm}|p{2cm}|p{2cm}|}
    	\hline
    	
        \textit{\textbf{Fibre Property}} & \textit{\textbf{Fibre 1}} & \textit{\textbf{Fibre 2}} & \textit{\textbf{Fibre 3}} & \textit{\textbf{Fibre 4}} & \textit{\textbf{Fibre 5}} \\
        
        \hline
        
        \textit{\textbf{Index, $\textbf{n}_{\textbf{1}}$ (@ 800nm)}} & \textit{1.456} & \textit{1.456} & \textit{1.458} & \textit{1.458} & \textit{1.46} \\
        
        \hline
        
        \textit{\textbf{Core diameter ($\boldsymbol{\mu} \textbf{m}$)}} & \textit{5} & \textit{6} & \textit{5} & \textit{6} & \textit{5} \\
        
		\hline
    \end{tabular}
    \caption{\textit{Manufacturers' fibre properties}}
    \label{tab:manufacturers_fibre}
\end{table}

\medskip




\paragraph{Part A \& B \linebreak}
\textit{Part a - Verify that the weak guidance approximation can be used for these fibres. What kind of transverse modes can be considered in this case?} \linebreak
%\textit{The second half of this question could be better stated as ``What kind of degenerated transverse modes can be considered in this case?''}

\textit{Part b - What are the two fibres that fulfil the condition C1?} \linebreak


Using Equations \ref{eqn:num_aper} - \ref{eqn:normalised} and assuming $n_{clad}$ is approximately 1.453 the values for the Numerical Aperture (NA), the Fraction Refractive Index Difference ($\Delta$), and Normalised Spatial Frequency (V) can be calculated as shown in Table \ref{tab:fibre_calculations}.

%%%%%%%%%% PARACOL %%%%%%%%%%
%% Set the left/right column width ratio to 6:4.
\columnratio{0.35}
%%%%%%%%%% LEFT HAND COLUMN %%%%%%%%%%
% Start a 2-column paracol. Both the left and right columns will automatically
% break across pages if things get too long.
\begin{paracol}{2}
\medskip

\setlength{\jot}{4ex}
\begin{gather}
	NA = Sin(\Theta_a) = \sqrt{n_{core}^2 - n_{clad}^2} 
	\label{eqn:num_aper}\\
	\Delta = \frac{n_{core}^2 - n_{clad}^2}{2 \cdot n_{core}^2}
	\label{eqn:frac_ri_diff}\\
	V = \frac{2 \pi a}{\lambda}\sqrt{n_{core}^2 - n_{clad}^2} 
	\label{eqn:normalised}
\end{gather}

%%%%%%%%%% RIGHT HAND COLUMN %%%%%%%%%%
%% Switch to the right column. This will now automatically move to the second
%% page if the content is too long.
\switchcolumn

\setlength{\jot}{1ex}
\begin{align}
	\text{Where:}& \nonumber\\\
	\lambda & \text{ is the wavelength of the light propagating down the fibre} \nonumber\\\
	\Delta & \text{ is the fractional refractive index difference (unitless)} \nonumber\\\
	\Theta_a & \text{ is the acceptance angle for rays incident from air into the}\nonumber\\\
	& \text{ fibre (Radians)} \nonumber\\\
	NA & \text{ is the Numerical Aperture and describes the light-gathering} \nonumber\\\
	& \text{ capacity of the fibre (unitless)} \nonumber\\\
	n_{core} & \text{ is the refractive index of the core's material (unitless)} \nonumber\\\
	n_{clad} & \text{ is the refractive index of the cladding's material (unitless)} \nonumber\\\
	V & \text{ is the normalised spatial frequency, the fibre parameter, or} \nonumber\\\
	& \text{ the ``V'' parameter and governs the number of modes able to} \nonumber\\
	& \text{ propagate at a given wavelength} \nonumber
\end{align}
\end{paracol}
%%%%%%%%%% END OF PARACOL %%%%%%%%%%

\newpage


%%%%% Python Code %%%%%
\begin{pycode}
import numpy as np

n_clad = 1.453
n_core = [1.456, 1.456, 1.458, 1.458, 1.46]
radius = [2.5e-6, 3e-6, 2.5e-6, 3e-6, 2.5e-6]
lamb_1 = 800e-9

NA = []
FRID = []
NSF = []
    
for i in range(len(n_core)):
	NA.append( np.round_((np.sqrt((n_core[i]**2) - (n_clad**2))), decimals=2) )
	
	FRID.append( np.round_( (((n_core[i]**2)-(n_clad**2)) / (2*(n_core[i]**2))), decimals=5) )
	
	NSF.append( np.round_( (((2 * np.pi * radius[i]) / (lamb_1)) * NA[i]), decimals=2) )


NA_req = 0.12
lamb_2 = 750e-9
v_req = 2.405
denom = 2 * np.pi * NA_req

a_min = (np.round_(((v_req * lamb_2) / denom), decimals=8))
a_max = (np.round_(((v_req * lamb_1) / denom), decimals=8))

a_min = (np.round_(a_min * (10e5), decimals=4))
a_max = (np.round_(a_max * (10e5), decimals=4))

d_min = np.round_((a_min * 2), decimals=2)
d_max = np.round_((a_max * 2), decimals=2)


lamb_A = 457e-9
NSF_3A = ( np.round_( (((2 * np.pi * radius[2]) / (lamb_A)) * NA[2]), decimals=2) )
\end{pycode}


%%%%% Table of Results %%%%%
\begin{table}[h]
    \centering
    \def\arraystretch{1.5}%  1 is the default, change whatever you need
    \begin{tabular}{|p{5cm}|p{2cm}|p{2cm}|p{2cm}|p{2cm}|p{2cm}|}
    	\hline
    	
    	%%%%%%%%%%%%%%%%%%%%
        \textit{\textbf{Fibre Property}} & \textit{\textbf{Fibre 1}} & \textit{\textbf{Fibre 2}} & \textit{\textbf{Fibre 3}} & \textit{\textbf{Fibre 4}} & \textit{\textbf{Fibre 5}} \\
        
        \hline
        
        %%%%%%%%%%%%%%%%%%%%
        \textit{\textbf{Index, $\textbf{n}_{\textbf{1}}$ (@ 800nm)}} & \textit{1.456} & \textit{1.456} & \textit{1.458} & \textit{1.458} & \textit{1.46} \\
        
        \hline
        
        %%%%%%%%%%%%%%%%%%%%
        \textit{\textbf{Core diameter ($\boldsymbol{\mu} \textbf{m}$)}} & \textit{5} & \textit{6} & \textit{5} & \textit{6} & \textit{5} \\
        
        \hline
        
		%%%%%%%%%%%%%%%%%%%%
        \textit{\textbf{Numerical Aperture, NA}} & \textit{\py{NA[0]}} & \textit{\py{NA[1]}} & \textit{\py{NA[2]}} & \textit{\py{NA[3]}} & \textit{\py{NA[4]}} \\
        
        \hline
        
        %%%%%%%%%%%%%%%%%%%%
        \textit{\textbf{Fractional refractive index difference, $\boldsymbol{\Delta}$}} & \textit{\py{FRID[0]}} & \textit{\py{FRID[1]}} & \textit{\py{FRID[2]}} & \textit{\py{FRID[3]}} & \textit{\py{FRID[4]}} \\
        
		\hline
        
        %%%%%%%%%%%%%%%%%%%%
        \textit{\textbf{Normalised spatial frequency, V, (@ $\boldsymbol{\lambda} =$ 800nm)}} & \textit{\py{NSF[0]}} & \textit{\py{NSF[1]}} & \textit{\py{NSF[2]}} & \textit{\py{NSF[3]}} & \textit{\py{NSF[4]}} \\
        
		\hline
    \end{tabular}
    \caption{\textit{Results of the calculations on the fibres}}
    \label{tab:fibre_calculations}
\end{table}

\bigskip

The weak guidance approximation / limit states that as long as the refractive index of the core ($n_{core}$) is close enough to that of the cladding ($n_{clad}$) such that the fractional refractive index difference ($\Delta$) is less that 0.001 ($\Delta \leq 10^{-2}$), this means that from the values calculated in Table \ref{tab:fibre_calculations} the weak guidance approximation may be used with all the fibres. \linebreak
As the weak guidance approximation applies, only Linearly Polarized (LP) modes can propagate.\linebreak

Finally, only two fibres will meet the requirement of condition C1 (The numerical aperture must be 0.12 i.e. $NA=0.12$), namely fibres 2 \& 3 \linebreak




\paragraph{Part C \linebreak}
\textit{Determine the limit values of the diameter of the core (maximal value and minimal value) imposed by the conditions C2 and C3. Deduce that the Fibre 3 only fulfils all the conditions required by the customer.} \linebreak

\medskip

From the graph showing the dispersion curves of LP modes (made using the bessel functions) it can be seen that in order to be single mode @ 800nm the V parameter of any fibre at this wavelength must be less than 2.405. In this same vein of thinking in order to propagate more than one mode @ 750nm the V parameter at this wavelength must be more than 2.405. \linebreak


These new conditions are stated mathematically in Equation \ref{eqn:new_conditions}, additionally, rearranging Equation \ref{eqn:normalised} to find suitable radius' will result in Equation \ref{eqn:radius_rearr}, and solving for our two conditions will give us a range of core radius' equal to Equation \ref{eqn:dia_calc} ($\py{d_min} < \text{ diameter, \o } < \py{d_max}$). \linebreak




\setlength{\jot}{3ex}
\begin{gather}
	V =
		\begin{cases}
			< 2.405 	& \quad \text{when } \lambda = 800nm, \text{ } NA=0.12\\
			> 2.405 	& \quad \text{when } \lambda = 750nm, \text{ } NA=0.12
		\end{cases}
	\label{eqn:new_conditions}\\
	a = \frac{V \cdot \lambda}{2\pi \cdot NA}\label{eqn:radius_rearr}
\end{gather}


\setlength{\jot}{2ex}
\begin{align}
	\text{From the new conditions} & \text{ and equations:} \nonumber\\\
	a < \frac{2.405 \cdot \lambda_{800}}{2\pi \cdot NA} \implies &a < \frac{2.405 \cdot (800 \times 10^{-9})}{2\pi \cdot 0.12}\nonumber\\\
	a > \frac{2.405 \cdot \lambda_{750}}{2\pi \cdot NA} \implies &a < \frac{2.405 \cdot (750 \times 10^{-9})}{2\pi \cdot 0.12}\nonumber\\\
	\therefore \py{a_min} \mu m < &\text{ a } < \py{a_max}\mu m \nonumber\\\
	\therefore \py{d_min} \mu m < &\text{ \o } < \py{d_max}\mu m \label{eqn:dia_calc}
\end{align}


\bigskip


Finally, from the previous part of the question we know that the only fibres which fulfil condition C1 are fibres 3 and 4 (thus they will satisfy the NA requirement, which was assumed in the equations). Also, since we have just calculated that fibre 4 does not meet the radius requirements inferred by conditions C1 and C2, it can be stated that only fibre 3 meets all three conditions.


\newpage




\subsubsection{Question Three}
\textit{A blue light beam from an argon laser emitting @ $\lambda_A = 457 nm$ is launched in a piece of Fibre 3.}

\paragraph{Part A \linebreak}
\textit{What are the LP modes able to propagate in the fibre at this wavelength?} \linebreak

%%%%%%%%%% PARACOL %%%%%%%%%%
\columnratio{0.5}
%%%%%%%%%% LEFT HAND COLUMN %%%%%%%%%%
% Start a 2-column paracol. Both the left and right columns will automatically
% break across pages if things get too long.
\begin{paracol}{2}

\medskip

Calculating in much the same way as before, and fully demonstrated in Equation \ref{eqn:v_fib_3_a}, the V parameter of fibre 3 at the wavelength of 457nm is \py{NSF_3A}. Consulting the dispersion curve

%%%%%%%%%% RIGHT HAND COLUMN %%%%%%%%%%
%% Switch to the right column. This will now automatically move to the second
%% page if the content is too long.
\switchcolumn

\setlength{\jot}{2ex}
\begin{equation}
	 V = \frac{2 \pi (2.5 \times 10^{-6})}{(457 \times 10^{-9})}\sqrt{1.458^2 - 1.453^2} = \py{NSF_3A} \label{eqn:v_fib_3_a}
\end{equation}

\end{paracol}
%%%%%%%%%% END OF PARACOL %%%%%%%%%%



\paragraph{Part B \linebreak}
\textit{Sketch a schematic representation of the energy distribution in each of these modes.} \linebreak




\paragraph{Part C \linebreak}
\textit{With any injection conditions, what can we observe on a screen set in front of the output face of the fibre?} \linebreak




\paragraph{Part D \linebreak}
\textit{Fibre 3 is spliced to a fibre $F_M$, single mode @ $\lambda_A$ and one measures the power at the output of this second fibre. What do we note if we handle the Fibre 3? Justify your answer. What do we note if we handle the Fibre $F_M$, without touching Fibre 3? Justify your answer.} \linebreak




\newpage




\subsubsection{Question Four}
\textit{We now work with the Fibre 3 only (Fibre $F_M$ is removed), @ $\lambda_T = 800nm$.}




\paragraph{Part A \linebreak}
\textit{Using the provided information, evaluate the propagation constant, $\beta$, of the fundamental LP mode @ $\lambda_T$.} \linebreak




\paragraph{Part B \linebreak}
\textit{Deduce the phase velocity of a continuous wave carried by this fundamental mode.} \linebreak




\paragraph{Part C \linebreak}
\textit{Why is the velocity of a pulse propagating in the fibre lower than this phase velocity?} \linebreak




\newpage




\subsubsection{Question Five}
\textit{In fact, the core of the fibre is elliptical, the axis of the ellipse being oriented along two perpendicular directions x and y. The modes $HE_{11x}$ and $HE_{11y}$ composing the $LP_{01}$ mode, respectively polarized along x and y, are no longer degenerated.}




\paragraph{Part A \linebreak}
\textit{What does this expression means: ``the modes $HE_{11x}$ and $HE_{11y}$ are no longer degenerated''?} \linebreak




\paragraph{Part B \linebreak}
\textit{At the wavelength $\lambda_T$, the effective indices of the two modes are $n_{ex}=1.45549$ for the $HE_{11x}$ mode and $n_{ex}=1.45551$ for the $HE_{11y}$ mode. Show that, at this wavelength, the two modes in phase periodically along their propagation, every 4 cm (the wave's spatial period).} \linebreak




\paragraph{Part C \linebreak}
\textit{What precaution should we take to ensure that a linearly polarized wave, launched at the input of a few meter long piece of fibre, remains linearly polarized at the output?} \linebreak




\newpage




%%%%% TUTORIAL TWO %%%%%
\subsection{Tutorial Two}
%%%%% QUESTION ONE %%%%%
\subsubsection{Question One}
\textit{Step index fibres are constituted by a cylindrical core refractive index n\textsubscript{1}($\lambda$), surrounded by a cladding refractive index n\textsubscript{2}($\lambda$). Most of the time, the cladding is masde of pure silica and the core is made of silica doped with germanium.} \\




\newpage




\newpage
\setstretch{1}  % Reduce bibliography line spacing
\bibliographystyle{IEEETran}
\bibliography{references.bib}
\end{document}
